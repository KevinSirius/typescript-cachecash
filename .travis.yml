language: node_js

cache:
  directories:
    - ~/.npm

notifications:
  # Don't email the results of the test runs.
  email: false
  # Notify us in Slack.  Generated with `travis encrypt` per the docs.
  slack:
    secure: fXgA1ALyCnRt+yCruZf3PrjDn4n3PMH0bitQl4wb4VWsccISZ3S6KJiOYkIl0K1YnxzGMJPeEymT6eV7ntAXIy+tjZ+glNu3GZLtvy6PFQJDg7RDh4opz0H3QEPy7mWOCa+0/BmB4rh/D8HF/1gTQ+zGQLLjxP6oFrSVaOb137hXJKh0XfGw5+361hRgmlRD5jdjZfXz7SgsgnY7H1VSgNjNPywiqYPzsgbV+FZFzicCloWBjfui4vduOJ9GsvPc+v0eaQZTNAGl2oKb77fv8dZlbYzg/ImhDilEw9EtBeIvjR1L+7VTXFoncRN4PGgVfjdp/wbjZ90wsIr/70jVVZFiUcY7sarhuU1Y+LQ4OZv/jcXh5rLpNDyeF//XwHSY/wZ/HGV06HN26NO8RdW3BSJs3CmA9z8XE14yFjTluecJ+PrG98cBbHkzCqDi6wvAi53hUoJYvZoj0shyefDlJbpfphbluXAE0w0gw0pcqYXuUC1ePxjNrtIeFQgdBHJ2VFs0LmaP0ATNi7MdkHRvRze80MTRoeHwKOb0vGQ23woj9nGsaZMz+rFPG8yfXMG1+oQnXzr6f33K9JtIOVqQ8AV5jrxS/+OGwa9ROz6+Ex5FXZCiWHPrWC1NGZlS1MeDsJHKltN773T4xIu8H2gkcvcsrQVTA6yjQsmGJNV3XUc=

node_js:
  - '10'
  - '11'
  - '8'

script:
  - npm run test:prod && npm run build

after_success:
  - npm run travis-deploy-once "npm run report-coverage"
  - if [ "$TRAVIS_BRANCH" = "master" -a "$TRAVIS_PULL_REQUEST" = "false" ]; then npm run travis-deploy-once "npm run deploy-docs"; fi
  - if [ "$TRAVIS_BRANCH" = "master" -a "$TRAVIS_PULL_REQUEST" = "false" ]; then npm run travis-deploy-once "npm run semantic-release"; fi

branches:
  except:
    - /^v\d+\.\d+\.\d+$/
